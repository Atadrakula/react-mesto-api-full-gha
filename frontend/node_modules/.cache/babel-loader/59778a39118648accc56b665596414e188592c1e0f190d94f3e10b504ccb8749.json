{"ast":null,"code":"class Authentication {\n  constructor(_ref) {\n    let {\n      url,\n      headers,\n      headersAuth\n    } = _ref;\n    this._generalUrl = url;\n    this._headers = headers;\n    this._token = null;\n  }\n  setToken(token) {\n    this._token = token;\n    localStorage.setItem('jwt', token);\n  }\n  _checkResponse(response) {\n    if (!response.ok) {\n      return Promise.reject(`Ошибка: ${response.status}`);\n    }\n    return response.json();\n  }\n  _request(endpoint, headers, options) {\n    return fetch(`${this._generalUrl}${endpoint}`, {\n      ...options,\n      headers: headers\n    }).then(this._checkResponse);\n  }\n  pushRegistration(data) {\n    return this._request('/signup', this._headers, {\n      method: 'POST',\n      body: JSON.stringify({\n        password: data.password,\n        email: data.email\n      })\n    });\n  }\n  pushLogin(data) {\n    return this._request('/signin', this._headers, {\n      method: 'POST',\n      body: JSON.stringify({\n        password: data.password,\n        email: data.email\n      })\n    }).then(res => {\n      if (res.token) {\n        this.setToken(res.token);\n      }\n      return res;\n    });\n  }\n  pullDataAuth() {\n    return this._request('/users/me', {\n      ...this.headers,\n      'Authorization': `Bearer ${this._token}`\n    });\n  }\n}\nconst serverConfig = {\n  url: 'https://auth.nomoreparties.co',\n  headers: {\n    'Content-Type': 'application/json'\n  }\n};\nconst authenticationApi = new Authentication(serverConfig);\nexport default authenticationApi;","map":{"version":3,"names":["Authentication","constructor","_ref","url","headers","headersAuth","_generalUrl","_headers","_token","setToken","token","localStorage","setItem","_checkResponse","response","ok","Promise","reject","status","json","_request","endpoint","options","fetch","then","pushRegistration","data","method","body","JSON","stringify","password","email","pushLogin","res","pullDataAuth","serverConfig","authenticationApi"],"sources":["C:/Users/Администратор/Desktop/Study/dev/twelve-project/mesto-react/src/utils/Authentication.js"],"sourcesContent":["class Authentication {\n  constructor({ url, headers, headersAuth }) {\n    this._generalUrl = url;\n    this._headers = headers;\n    this._token = null;\n  }\n\n  setToken(token) {\n    this._token = token;\n    localStorage.setItem('jwt', token);\n  }\n\n  _checkResponse(response) {\n    if (!response.ok) {\n      return Promise.reject(`Ошибка: ${response.status}`);\n    }\n    return response.json();\n  }\n\n  _request(endpoint, headers, options) {\n    return fetch(`${this._generalUrl}${endpoint}`, { ...options, headers: headers }).then(this._checkResponse);\n  }\n\n  pushRegistration(data) {\n    return this._request('/signup', this._headers, {\n      method: 'POST',\n      body: JSON.stringify({\n        password: data.password,\n        email: data.email\n      })\n    });\n  }\n\n  pushLogin(data) {\n    return this._request('/signin', this._headers, {\n      method: 'POST',\n      body: JSON.stringify({\n        password: data.password,\n        email: data.email\n      })\n    }).then(res => {\n      if (res.token) {\n        this.setToken(res.token);\n      }\n      return res;\n    });\n  }\n\n  pullDataAuth() {\n    return this._request('/users/me',\n    {...this.headers, 'Authorization' : `Bearer ${this._token}`});\n  }\n\n}\n\nconst serverConfig = {\n  url: 'https://auth.nomoreparties.co',\n  headers: {\n    'Content-Type': 'application/json'\n  }\n};\n\nconst authenticationApi = new Authentication(serverConfig);\n\nexport default authenticationApi;\n"],"mappings":"AAAA,MAAMA,cAAc,CAAC;EACnBC,WAAWA,CAAAC,IAAA,EAAgC;IAAA,IAA/B;MAAEC,GAAG;MAAEC,OAAO;MAAEC;IAAY,CAAC,GAAAH,IAAA;IACvC,IAAI,CAACI,WAAW,GAAGH,GAAG;IACtB,IAAI,CAACI,QAAQ,GAAGH,OAAO;IACvB,IAAI,CAACI,MAAM,GAAG,IAAI;EACpB;EAEAC,QAAQA,CAACC,KAAK,EAAE;IACd,IAAI,CAACF,MAAM,GAAGE,KAAK;IACnBC,YAAY,CAACC,OAAO,CAAC,KAAK,EAAEF,KAAK,CAAC;EACpC;EAEAG,cAAcA,CAACC,QAAQ,EAAE;IACvB,IAAI,CAACA,QAAQ,CAACC,EAAE,EAAE;MAChB,OAAOC,OAAO,CAACC,MAAM,CAAE,WAAUH,QAAQ,CAACI,MAAO,EAAC,CAAC;IACrD;IACA,OAAOJ,QAAQ,CAACK,IAAI,CAAC,CAAC;EACxB;EAEAC,QAAQA,CAACC,QAAQ,EAAEjB,OAAO,EAAEkB,OAAO,EAAE;IACnC,OAAOC,KAAK,CAAE,GAAE,IAAI,CAACjB,WAAY,GAAEe,QAAS,EAAC,EAAE;MAAE,GAAGC,OAAO;MAAElB,OAAO,EAAEA;IAAQ,CAAC,CAAC,CAACoB,IAAI,CAAC,IAAI,CAACX,cAAc,CAAC;EAC5G;EAEAY,gBAAgBA,CAACC,IAAI,EAAE;IACrB,OAAO,IAAI,CAACN,QAAQ,CAAC,SAAS,EAAE,IAAI,CAACb,QAAQ,EAAE;MAC7CoB,MAAM,EAAE,MAAM;MACdC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;QACnBC,QAAQ,EAAEL,IAAI,CAACK,QAAQ;QACvBC,KAAK,EAAEN,IAAI,CAACM;MACd,CAAC;IACH,CAAC,CAAC;EACJ;EAEAC,SAASA,CAACP,IAAI,EAAE;IACd,OAAO,IAAI,CAACN,QAAQ,CAAC,SAAS,EAAE,IAAI,CAACb,QAAQ,EAAE;MAC7CoB,MAAM,EAAE,MAAM;MACdC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;QACnBC,QAAQ,EAAEL,IAAI,CAACK,QAAQ;QACvBC,KAAK,EAAEN,IAAI,CAACM;MACd,CAAC;IACH,CAAC,CAAC,CAACR,IAAI,CAACU,GAAG,IAAI;MACb,IAAIA,GAAG,CAACxB,KAAK,EAAE;QACb,IAAI,CAACD,QAAQ,CAACyB,GAAG,CAACxB,KAAK,CAAC;MAC1B;MACA,OAAOwB,GAAG;IACZ,CAAC,CAAC;EACJ;EAEAC,YAAYA,CAAA,EAAG;IACb,OAAO,IAAI,CAACf,QAAQ,CAAC,WAAW,EAChC;MAAC,GAAG,IAAI,CAAChB,OAAO;MAAE,eAAe,EAAI,UAAS,IAAI,CAACI,MAAO;IAAC,CAAC,CAAC;EAC/D;AAEF;AAEA,MAAM4B,YAAY,GAAG;EACnBjC,GAAG,EAAE,+BAA+B;EACpCC,OAAO,EAAE;IACP,cAAc,EAAE;EAClB;AACF,CAAC;AAED,MAAMiC,iBAAiB,GAAG,IAAIrC,cAAc,CAACoC,YAAY,CAAC;AAE1D,eAAeC,iBAAiB"},"metadata":{},"sourceType":"module","externalDependencies":[]}