{"ast":null,"code":"import _objectSpread from\"C:/Users/\\u0410\\u0434\\u043C\\u0438\\u043D\\u0438\\u0441\\u0442\\u0440\\u0430\\u0442\\u043E\\u0440/Desktop/Study/dev/twelve-project/mesto-react/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _classCallCheck from\"C:/Users/\\u0410\\u0434\\u043C\\u0438\\u043D\\u0438\\u0441\\u0442\\u0440\\u0430\\u0442\\u043E\\u0440/Desktop/Study/dev/twelve-project/mesto-react/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/\\u0410\\u0434\\u043C\\u0438\\u043D\\u0438\\u0441\\u0442\\u0440\\u0430\\u0442\\u043E\\u0440/Desktop/Study/dev/twelve-project/mesto-react/node_modules/@babel/runtime/helpers/esm/createClass.js\";var Authentication=/*#__PURE__*/function(){function Authentication(_ref){var url=_ref.url,headers=_ref.headers;_classCallCheck(this,Authentication);this._generalUrl=url;this._headers=headers;this._token=null;}_createClass(Authentication,[{key:\"_checkResponse\",value:function _checkResponse(response){if(!response.ok){return Promise.reject(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(response.status));}return response.json();}},{key:\"_request\",value:function _request(endpoint,headers,options){return fetch(\"\".concat(this._generalUrl).concat(endpoint),_objectSpread(_objectSpread({},options),{},{headers:headers})).then(this._checkResponse);}},{key:\"pushRegistration\",value:function pushRegistration(data){return this._request('/signup',this._headers,{method:'POST',body:JSON.stringify({password:data.password,email:data.email})});}},{key:\"pushLogin\",value:function pushLogin(data){var _this=this;return this._request('/signin',this._headers,{method:'POST',body:JSON.stringify({password:data.password,email:data.email})}).then(function(res){if(res.token){_this.setToken(res.token);}return res;});}},{key:\"pullDataAuth\",value:function pullDataAuth(){return this._request('/users/me',_objectSpread(_objectSpread({},this.headers),{},{'Authorization':\"Bearer \".concat(this._token)}));}},{key:\"setToken\",value:function setToken(token){this._token=token;localStorage.setItem('jwt',token);}}]);return Authentication;}();var serverConfig={url:'https://auth.nomoreparties.co',headers:{'Content-Type':'application/json'}};var authenticationApi=new Authentication(serverConfig);export default authenticationApi;","map":{"version":3,"names":["Authentication","_ref","url","headers","_classCallCheck","_generalUrl","_headers","_token","_createClass","key","value","_checkResponse","response","ok","Promise","reject","concat","status","json","_request","endpoint","options","fetch","_objectSpread","then","pushRegistration","data","method","body","JSON","stringify","password","email","pushLogin","_this","res","token","setToken","pullDataAuth","localStorage","setItem","serverConfig","authenticationApi"],"sources":["C:/Users/Администратор/Desktop/Study/dev/twelve-project/mesto-react/src/utils/Authentication.js"],"sourcesContent":["class Authentication {\r\n  constructor({ url, headers}) {\r\n    this._generalUrl = url;\r\n    this._headers = headers;\r\n    this._token = null;\r\n  }\r\n\r\n  _checkResponse(response) {\r\n    if (!response.ok) {\r\n      return Promise.reject(`Ошибка: ${response.status}`);\r\n    }\r\n    return response.json();\r\n  }\r\n\r\n  _request(endpoint, headers, options) {\r\n    return fetch(`${this._generalUrl}${endpoint}`, { ...options, headers: headers }).then(this._checkResponse);\r\n  }\r\n\r\n  pushRegistration(data) {\r\n    return this._request('/signup', this._headers, {\r\n      method: 'POST',\r\n      body: JSON.stringify({\r\n        password: data.password,\r\n        email: data.email\r\n      })\r\n    });\r\n  }\r\n\r\n  pushLogin(data) {\r\n    return this._request('/signin', this._headers, {\r\n      method: 'POST',\r\n      body: JSON.stringify({\r\n        password: data.password,\r\n        email: data.email\r\n      })\r\n    })\r\n    .then(res => {\r\n      if (res.token) {\r\n        this.setToken(res.token);\r\n      }\r\n      return res;\r\n    })\r\n  }\r\n\r\n  pullDataAuth() {\r\n    return this._request('/users/me',\r\n    {...this.headers, 'Authorization' : `Bearer ${this._token}`});\r\n  }\r\n\r\n  setToken(token) {\r\n    this._token = token;\r\n    localStorage.setItem('jwt', token);\r\n  }\r\n\r\n}\r\n\r\nconst serverConfig = {\r\n  url: 'https://auth.nomoreparties.co',\r\n  headers: {\r\n    'Content-Type': 'application/json'\r\n  }\r\n};\r\n\r\nconst authenticationApi = new Authentication(serverConfig);\r\n\r\nexport default authenticationApi;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}