{"ast":null,"code":"import _objectSpread from\"C:/Users/\\u0410\\u0434\\u043C\\u0438\\u043D\\u0438\\u0441\\u0442\\u0440\\u0430\\u0442\\u043E\\u0440/Desktop/Study/dev/twelve-project/mesto-react/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _classCallCheck from\"C:/Users/\\u0410\\u0434\\u043C\\u0438\\u043D\\u0438\\u0441\\u0442\\u0440\\u0430\\u0442\\u043E\\u0440/Desktop/Study/dev/twelve-project/mesto-react/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/\\u0410\\u0434\\u043C\\u0438\\u043D\\u0438\\u0441\\u0442\\u0440\\u0430\\u0442\\u043E\\u0440/Desktop/Study/dev/twelve-project/mesto-react/node_modules/@babel/runtime/helpers/esm/createClass.js\";var Authentication=/*#__PURE__*/function(){function Authentication(_ref){var url=_ref.url,headers=_ref.headers,headersAuth=_ref.headersAuth;_classCallCheck(this,Authentication);this._generalUrl=url;this._headers=headers;this._token=null;}_createClass(Authentication,[{key:\"setToken\",value:function setToken(token){this._token=token;localStorage.setItem('jwt',token);}},{key:\"_checkResponse\",value:function _checkResponse(response){if(!response.ok){return Promise.reject(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(response.status));}return response.json();}},{key:\"_request\",value:function _request(endpoint,headers,options){return fetch(\"\".concat(this._generalUrl).concat(endpoint),_objectSpread(_objectSpread({},options),{},{headers:headers})).then(this._checkResponse);}},{key:\"pushRegistration\",value:function pushRegistration(data){return this._request('/signup',this._headers,{method:'POST',body:JSON.stringify({password:data.password,email:data.email})});}},{key:\"pushLogin\",value:function pushLogin(data){var _this=this;return this._request('/signin',this._headers,{method:'POST',body:JSON.stringify({password:data.password,email:data.email})}).then(function(res){if(res.token){_this.setToken(res.token);}return res;});}},{key:\"pullDataAuth\",value:function pullDataAuth(){return this._request('/users/me',_objectSpread(_objectSpread({},this.headers),{},{'Authorization':\"Bearer \".concat(this._token)}));}}]);return Authentication;}();var serverConfig={url:'https://auth.nomoreparties.co',headers:{'Content-Type':'application/json'}};var authenticationApi=new Authentication(serverConfig);export default authenticationApi;","map":{"version":3,"names":["Authentication","_ref","url","headers","headersAuth","_classCallCheck","_generalUrl","_headers","_token","_createClass","key","value","setToken","token","localStorage","setItem","_checkResponse","response","ok","Promise","reject","concat","status","json","_request","endpoint","options","fetch","_objectSpread","then","pushRegistration","data","method","body","JSON","stringify","password","email","pushLogin","_this","res","pullDataAuth","serverConfig","authenticationApi"],"sources":["C:/Users/Администратор/Desktop/Study/dev/twelve-project/mesto-react/src/utils/Authentication.js"],"sourcesContent":["class Authentication {\n  constructor({ url, headers, headersAuth }) {\n    this._generalUrl = url;\n    this._headers = headers;\n    this._token = null;\n  }\n\n  setToken(token) {\n    this._token = token;\n    localStorage.setItem('jwt', token);\n  }\n\n  _checkResponse(response) {\n    if (!response.ok) {\n      return Promise.reject(`Ошибка: ${response.status}`);\n    }\n    return response.json();\n  }\n\n  _request(endpoint, headers, options) {\n    return fetch(`${this._generalUrl}${endpoint}`, { ...options, headers: headers }).then(this._checkResponse);\n  }\n\n  pushRegistration(data) {\n    return this._request('/signup', this._headers, {\n      method: 'POST',\n      body: JSON.stringify({\n        password: data.password,\n        email: data.email\n      })\n    });\n  }\n\n  pushLogin(data) {\n    return this._request('/signin', this._headers, {\n      method: 'POST',\n      body: JSON.stringify({\n        password: data.password,\n        email: data.email\n      })\n    })\n    .then(res => {\n      if (res.token) {\n        this.setToken(res.token);\n      }\n      return res;\n    })\n  }\n\n  pullDataAuth() {\n    return this._request('/users/me',\n    {...this.headers, 'Authorization' : `Bearer ${this._token}`});\n  }\n\n}\n\nconst serverConfig = {\n  url: 'https://auth.nomoreparties.co',\n  headers: {\n    'Content-Type': 'application/json'\n  }\n};\n\nconst authenticationApi = new Authentication(serverConfig);\n\nexport default authenticationApi;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}